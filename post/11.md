<!--
@key 11
@title ä½¿ç”¨ Electron å’Œ React æ„å»ºæ¡Œé¢åº”ç”¨
@date 2018-6-3
@labels JavaScript Electron React
-->

# ğŸ¤” Electron ?
`Electron` æ˜¯ä¸€ä¸ªä½¿ç”¨ `HTML`ã€`CSS`ã€`JavaScript` æ„å»ºè·¨å¹³å°æ¡Œé¢åº”ç”¨çš„æ¡†æ¶ã€‚

è¯´ç™½äº†å°±æ˜¯ç”¨è¿™ä¸ªæ¡†æ¶ï¼Œä½ å¯ä»¥åœ¨ä½¿ç”¨å‰ç«¯æŠ€æœ¯æ¥å¼€å‘æ¡Œé¢åº”ç”¨ï¼ŒåŸç†æ˜¯åœ¨æœ¬åœ°åº”ç”¨ä¸Šè·‘ä¸€ä¸ªæŠ½å‡ºæ¥çš„æµè§ˆå™¨ï¼Œæµè§ˆå™¨ä¸Šæ”¾ä½ å†™çš„é¡µé¢ã€‚

ä½ å¯èƒ½ä¼šé—® `Electron` çš„å­˜åœ¨æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Œä¼—æ‰€å‘¨çŸ¥ï¼Œå‰ç«¯æŠ€æœ¯å¯ä»¥è®©æˆ‘ä»¬è½»æ¾å†™å‡ºæ¼‚äº®æ˜“ç”¨çš„ç•Œé¢ï¼Œå¦‚æœä½ å°è¯•è¿‡å…¶ä»–çš„æ¡Œé¢å¼€å‘æŠ€æœ¯ï¼Œæƒ³å¿…ä½ ä¹Ÿåº”è¯¥çŸ¥é“å…¶ä»–çš„é‚£äº›æ¡Œé¢å¼€å‘å·¥å…·å¼€å‘å‡ºæ¥çš„ç•Œé¢æœ‰å¤šä¸‘ï¼Œè€Œ `Electron` è½»æ¾åœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚è€Œä¸”ä»å¦å¤–ä¸€ä¸ªè§’åº¦æ¥è®²ï¼Œ`Electron` ä¹Ÿå¯ä»¥å¿«é€Ÿåœ°å°†ä½ çš„ç½‘ç«™æ‰“åŒ…æˆä¸€ä¸ªåŸç”Ÿåº”ç”¨å‘å¸ƒã€‚æ€»ä¹‹ï¼Œå‰ç«¯æŠ€æœ¯æ˜¯æ„å»ºç”¨æˆ·ç•Œé¢æœ€å¥½çš„é€‰æ‹©ï¼Œè€Œ `Electron` åˆ™ä¸ºè¿™ä¸€æ€æƒ³åœ¨æ¡Œé¢çš„å®ç°å¥ å®šäº†åŸºç¡€ã€‚

# â˜• èŠä¸€èŠéœ€è¦ç”¨åˆ°çš„å‰ç«¯æŠ€æœ¯æ ˆ
å¦‚æœä½ å·²ç»å¯¹å¸¸è§çš„å‰ç«¯æŠ€æœ¯æ ˆæœ‰ç€ä¸€å®šäº†è§£ï¼Œå»ºè®®ç›´æ¥è·³è‡³ä¸‹ä¸€èŠ‚ï¼ŒæŸ¥çœ‹ `Electron` + `React` é¡¹ç›®çš„å»ºç«‹æ–¹æ³•ã€‚

åœ¨å¼€å§‹æˆ‘ä»¬çš„ç•…èŠä¹‹å‰ï¼Œå…ˆè¦è¯´ä¸€è¯´åŸå§‹çš„å‰ç«¯æŠ€æœ¯ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œä¼ ç»Ÿçš„å‰ç«¯æŠ€æœ¯éƒ½æ˜¯ä½¿ç”¨ `HTML`ã€`CSS`ã€`JavaScript` è¿™å¾¡ä¸‰å®¶æ¥å®Œæˆå¼€å‘çš„ï¼Œ`HTML` è´Ÿè´£é¡µé¢æ¡†æ¶ã€`CSS` è´Ÿè´£é¡µé¢æ ·å¼ã€`JavaScript` è´Ÿè´£é¡µé¢åŠ¨æ€ï¼Œè¿™ä¸‰è€…å„å¸å…¶èŒï¼Œå±•ç°å‡ºä¸€ä¸ªå®Œæ•´ç¾å¦™çš„ `Web` ä¸–ç•Œã€‚

éšç€å‰ç«¯çš„å‘å±•ï¼Œè¿™ä¸‰è€…å¼€å§‹å‡ºç°äº†è¿™æ ·é‚£æ ·çš„é—®é¢˜ï¼Œæ¯ä¸€é¡¹æ–°å‰ç«¯æŠ€æœ¯çš„å‡ºç°ï¼Œéƒ½æ˜¯å‰ç«¯çš„ä¸€æ¬¡é£è·ƒã€‚

### Node.js
`Node.js` çš„å‡ºç°ï¼Œæ— éæ˜¯å‰ç«¯å‘å±•çš„ä¸€ä¸ªé‡Œç¨‹ç¢‘ï¼Œå®ƒçš„å‡ºç°ï¼Œå°†å‰ç«¯æ¨å‘äº†ä¸€ä¸ªæ–°çš„é«˜å³°ã€‚

> Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒã€‚Node.js ä½¿ç”¨äº†ä¸€ä¸ªäº‹ä»¶é©±åŠ¨ã€éé˜»å¡å¼ I/O çš„æ¨¡å‹ï¼Œä½¿å…¶è½»é‡åˆé«˜æ•ˆã€‚ Node.js çš„åŒ…ç®¡ç†å™¨ npmï¼Œæ˜¯å…¨çƒæœ€å¤§çš„å¼€æºåº“ç”Ÿæ€ç³»ç»Ÿã€‚

çœ‹å®˜ç½‘çš„è§£é‡Šä½ å¯èƒ½è¿˜æ˜¯ä¸€è„¸æ‡µé€¼ï¼Œè¿™ä¹ˆè¯´å§ï¼Œä¼ ç»Ÿçš„ `JavaScript` åªèƒ½ä¾èµ–æµè§ˆå™¨è€Œè¿è¡Œï¼Œè€Œ `Node.js` åˆ™å°† `Chrome` çš„æµè§ˆå™¨å¼•æ“æŠ½äº†å‡ºæ¥å¹¶åŠ ä»¥æ”¹è¿›ï¼Œä½¿å¾— `JavaScript` å¯ä»¥è„±ç¦»æµè§ˆå™¨è€Œè¿è¡Œã€‚

è€Œ `npm` åˆ™æ˜¯ `Node.js` çš„ä¸€ä¸ªåŒ…ç®¡ç†å·¥å…·ï¼Œä½ å¯ä»¥ä½¿ç”¨ `npm` å®‰è£…è¿™æ ·é‚£æ ·çš„ `JavaScript` åŒ…ï¼Œå°±åƒ `Python` çš„ `pip` é‚£æ ·ç®€å•ã€‚

`Node.js` çš„å‡ºç°ï¼Œä½¿å¾—è¿™æ ·é‚£æ ·çš„å‰ç«¯å¼€å‘å·¥å…·ã€æ¡†æ¶å¦‚æ˜¥ç¬‹èˆ¬æ¶Œç°ï¼Œå¦‚ `Grunt`ã€`Webpack`ã€`React`ã€`Vue` ç­‰ç­‰ã€‚è€Œä¸” `JavaScript` èƒ½å¤Ÿè„±ç¦»æµè§ˆå™¨è€Œè¿è¡Œï¼Œä¹Ÿä»æŸç§æ„ä¹‰ä¸Šä½¿ `JavaScript` å˜æˆäº†ä¸€ä¸ªè·¨å¹³å°è¯­è¨€ã€‚å¯ä»¥è¯´ï¼Œ`Node.js`ï¼Œå°±æ˜¯å¦‚ä»Šå‰ç«¯çš„æ ¸å¿ƒã€‚

### æ„å»ºå·¥å…·
ä¼ ç»Ÿçš„å‰ç«¯ `JavaScript` å¼€å‘ä¸­ï¼Œä¼šå­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œæœ€å¤§çš„é—®é¢˜ä¹‹ä¸€ï¼Œå°±æ˜¯é¡¹ç›®æ–‡ä»¶ä¹‹é—´çš„ä¾èµ–é—®é¢˜ï¼Œè¿™ä¸€é—®é¢˜æ—¶å¸¸è®©å‰ç«¯å¼€å‘è€…è‹¦æ¼ä¸å·²ã€‚

éšç€ `Node.js` çš„å‡ºç°ï¼Œäººä»¬å¯¹ `JavaScript` çš„ä½¿ç”¨æ–¹æ³•äº§ç”Ÿäº†æ½œç§»é»˜åŒ–çš„å˜åŒ–ï¼Œå› ä¸º `JavaScript` å·²ç»æˆä¸ºäº†ä¸€é—¨è„±ç¦»æµè§ˆå™¨è€Œå­˜åœ¨çš„Nativeè¯­è¨€ï¼Œäººä»¬å¼€å§‹å°† `JavaScript` åƒå…¶ä»–è¯­è¨€ä¸€æ ·çœ‹å¾…ã€‚

â€œç¼–è¯‘â€ï¼Œè¿™ä¸€æ¦‚å¿µï¼Œä¹Ÿè‡ªç„¶åœ°è¢«äººä»¬å¼•å…¥äº† `JavaScript` çš„ä¸–ç•Œï¼Œå°½ç®¡å®ƒæ˜¯ä¸€é—¨åŠ¨æ€è¯­è¨€ã€‚åœ¨ä¼ ç»Ÿè¯­è¨€ä¸­ï¼Œâ€œç¼–è¯‘â€è¿™ä¸€è¿‡ç¨‹æ—¶å¸¸æ˜¯å°†å¤šä¸ªæºæ–‡ä»¶ç¼–è¯‘å¹¶é“¾æ¥æˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œâ€œç¼–è¯‘â€çš„è¿‡ç¨‹ï¼Œæ— éå°±ä¸‰ä¸ªé‡è¦ç‚¹ï¼š

* æ¯ä¸€ä¸ªæºæ–‡ä»¶è¾“å‡ºæˆä¸­é—´ä»¶
* åˆ¤æ–­å„ä¸ªä¸­é—´ä»¶ä¹‹é—´çš„ç›¸äº’ä¾èµ–å…³ç³»
* æ ¹æ®ä¾èµ–å…³ç³»å°†ä¸­é—´ä»¶æ‰“åŒ…åœ¨ä¸€èµ·æ„æˆè¾“å‡º

è¿™ä¸€æ€æƒ³è¢«è¿ç”¨åˆ° `JavaScript` ä¹‹åï¼Œäººä»¬è§‰å¾— `JavaScript` ä¹Ÿåº”è¯¥æœ‰â€œç¼–è¯‘â€è¿™ä¸€è¿‡ç¨‹ï¼Œç”¨æ¥åšä»¥ä¸‹äº‹æƒ…ï¼š

* å°†æ¯ä¸€ä¸ª `JavaScript` æ–‡ä»¶å‹ç¼©ï¼Œåˆ å»æ‰€æœ‰æ— æ•ˆå­—ç¬¦ï¼Œè¾“å‡ºä¸ºä¸­é—´ä»¶
* åˆ¤æ–­å„ä¸ªä¸­é—´ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»
* æ ¹æ®ä¾èµ–å…³ç³»å°†æ‰€æœ‰ä¸­é—´ä»¶æ‰“åŒ…æˆä¸€ä¸ªè¾“å‡ºæ–‡ä»¶ï¼Œè¿™ä¸ªè¾“å‡ºæ–‡ä»¶ä¸­å…·æœ‰åŸæ¥å„ä¸ª `JavaScript` ä¸­çš„æ‰€æœ‰åŠŸèƒ½ï¼Œä½†æ˜¯ä½“ç§¯æ›´å°ï¼Œè€Œä¸”ä¾èµ–å…³ç³»è¢«ä¸¥æ ¼é™åˆ¶å¹¶ä¸”æ— è¯¯

è¿™å°±æ˜¯æ„å»ºå·¥å…·ï¼Œä½ å¯ä»¥æŠŠä»–ä»¬è®¤ä¸ºæ˜¯ `JavaScript` çš„ç¼–è¯‘å™¨ï¼Œç”¨äºäº§ç”Ÿæ›´åŠ é€‚åˆç”Ÿäº§ä½¿ç”¨çš„è¾“å‡ºæ–‡ä»¶ã€‚

å½“ç„¶è¿™åªæ˜¯æ„å»ºå·¥å…·åŠŸèƒ½çš„ä¸€éƒ¨åˆ†ï¼Œç°åœ¨çš„æ„å»ºå·¥å…·å¾€å¾€è¿˜å…·æœ‰ä¸€äº›æ›´åŠ é«˜çº§çš„åŠŸèƒ½ï¼Œæ¯”å¦‚è‡ªåŠ¨æµç¨‹ç­‰ã€‚

ç°åœ¨å¸¸è§çš„æ„å»ºå·¥å…·æœ‰ `Grunt`ã€`Webpack` ç­‰ã€‚

### React
`React` æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ `JavaScript` æ¡†æ¶ï¼Œä¸ `Vue`ã€`Angular` è¿™å¦ä¸¤å¤§æ¡†æ¶ç›¸å¹¶åˆ—ã€‚

`React` çš„å¼ºå¤§ä¹‹å¤„åœ¨äºç”¨ä¸€ç§å·§å¦™çš„æ€æƒ³å¤„ç†äº† `Web` é¡µé¢ä¸­å†—ä½™é‡å¤ä»£ç å¤šçš„é—®é¢˜ã€‚å®ƒèƒ½å°†ä¸€äº›å¯é‡ç”¨çš„ä»£ç å°è£…æˆä¸€ä¸ªä¸ªç»„ä»¶ï¼Œåœ¨å¦å¤–ä½¿ç”¨çš„æ—¶å€™ï¼Œåªéœ€è¦ä½¿ç”¨ç»„ä»¶è¿›è¡Œå®ä¾‹åŒ–å³å¯ã€‚è¿™ç§æ€æƒ³ä¸é¢å‘å¯¹è±¡çš„æ€æƒ³éå¸¸ç›¸åƒã€‚æ‰€ä»¥è¯´ï¼Œä»æ€æƒ³å’Œä½¿ç”¨ä¸Šè¯´ï¼Œ`React`åº”è¯¥æ˜¯ä¸€ä¸ªéå¸¸æˆç†Ÿçš„æ¡†æ¶ã€‚

### å‰ç«¯è·¯ç”±
ä¼—æ‰€å‘¨çŸ¥ï¼Œå¾€å¸¸Webç½‘ç«™ä¸­çš„è·¯ç”±æ˜¯äº¤ç”±åç«¯æ¥åšçš„ï¼Œæ¯”å¦‚ç”¨æˆ·è®¿é—®

```
/match/2
```

è¿™ä¹ˆä¸€ä¸ª `url`ï¼Œæœ¬æ¥åº”è¯¥æ˜¯ç”±åç«¯æœåŠ¡å™¨æ¥æ¥æ”¶è¯·æ±‚å¹¶ä¸”åšå‡ºç›¸åº”çš„å¤„ç†ã€‚ä½†æ˜¯éšç€ `Node.js` å’Œæ„å»ºå·¥å…·çš„å‡ºç°ï¼Œäººä»¬å¼€å§‹æƒ³ï¼Œé‚£ä¹ˆå¤šè¯·æ±‚éƒ½è¦äº¤ç”±åç«¯æ¥åšå²‚ä¸æ˜¯å¾ˆéº»çƒ¦ï¼Œè€Œä¸”ä»æŸç§æ„ä¹‰ä¸Šï¼Œ`Web` ç½‘ç«™æœ¬èº«å°±æ˜¯ä¸€ä¸ªåº”ç”¨ï¼Œå…¶ä¸­çš„åœ°å€å˜åŒ–å¤„ç†çš„é€»è¾‘åº”è¯¥åœ¨åº”ç”¨å†…éƒ¨è§£å†³ï¼Œåªæœ‰æ¶‰åŠåˆ°åç«¯éœ€æ±‚çš„ï¼Œæ‰äº¤ç”±æœåŠ¡å™¨æ¥å¤„ç†ã€‚

æ‰€ä»¥ï¼Œå‰ç«¯è·¯ç”±ï¼Œåº”è¿è€Œç”Ÿã€‚

å‰ç«¯è·¯ç”±çš„å­˜åœ¨æ„ä¹‰å°±åœ¨äºå°†è·¯å¾„é€»è¾‘äº¤ç”±å‰ç«¯æ¥å¤„ç†ï¼Œè€Œä¸æ˜¯åç«¯ï¼Œè¿™æ ·èƒ½è®©åç«¯ä¸“æ³¨ä¸çœŸæ­£éœ€è¦åç«¯èµ„æºçš„è¯·æ±‚çš„å¤„ç†ã€‚

å‰ç«¯è·¯ç”±å¾€å¾€ä¸æ„å»ºå·¥å…·ã€å‰ç«¯ç•Œé¢æ¡†æ¶ç›¸äº’é…åˆï¼Œæ„å»ºå·¥å…·è´Ÿè´£å°†æ‰€æœ‰æ–‡ä»¶æ‰“åŒ…ï¼Œè€Œå‰ç«¯ç•Œé¢æ¡†æ¶å¾€å¾€è‡ªå·±å¸¦æœ‰è‡ªå·±çš„å‰ç«¯è·¯ç”±æ¡†æ¶ï¼Œæœ€åæ‰“åŒ…å‡ºæ¥çš„è¾“å‡ºæ–‡ä»¶ï¼Œä¸€èˆ¬åªæœ‰ä¸€ä¸ª `inedx.html`ã€ä¸€ä¸ª `bunble.js` å’Œå…¶ä»–çš„èµ„æºæ–‡ä»¶ã€‚ä¸€ä¸ª `index.html` ï¼Œé…åˆ `bunble.js`ï¼Œå°±èƒ½å±•ç°æ‰€æœ‰é¡µé¢çš„å†…å®¹ã€‚

è¿™æ ·æ—¢èƒ½å‡å°‘è¯·æ±‚é‡ï¼Œåˆç¬¦åˆäººä»¬çš„æ­£å¸¸æ€æƒ³ï¼Œä¸€ä¸ªç½‘ç«™å°±æ˜¯ä¸€ä¸ªåº”ç”¨ï¼Œåƒ `Native` é‚£æ ·ï¼Œåº”ç”¨å†…éƒ¨çš„é€»è¾‘ç”±åº”ç”¨è‡ªå·±å¤„ç†ï¼ŒçœŸæ­£éœ€è¦åç«¯æ”¯æ´çš„æ—¶å€™æ‰å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼Œè®©æœåŠ¡å™¨å¤„ç†ï¼Œå¤šå¥½ã€‚

# ğŸ‰ é¡¹ç›®æ­å»ºä¾‹å­: Electron + React + Ant-Design
ç†è®ºä¸Šæ¥è¯´ï¼Œç›®å‰çš„å‰ç«¯æ¡†æ¶éƒ½èƒ½å¾ˆå¥½åœ°é…åˆ `Electron` è¿›è¡Œå·¥ä½œï¼Œå½“ç„¶ä½ ç”šè‡³å¯ä»¥ä½¿ç”¨åŸç”Ÿå¾¡ä¸‰å®¶åŠ ä¸Š `Node.js` æ¥è¿›è¡Œ `Electron` åº”ç”¨çš„å¼€å‘ã€‚

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¥æˆ‘æœ¬äººçš„å¼€å‘å–œå¥½ä¸ºä¾‹ï¼Œè®²è§£ä¸€ä¸‹ä½¿ç”¨ `React` ä½œä¸ºå‰ç«¯ç•Œé¢æ¡†æ¶ã€`Ant-Design` ä½œä¸º `UI` åº“ã€`Electron` ä½œä¸º `Native` æ”¯æŒçš„é¡¹ç›®æ­å»ºã€‚

æ¥ä¸‹æ¥çš„æ“ä½œé»˜è®¤ä½ å·²ç»å®‰è£…äº† `Node.js`ã€‚

### å®‰è£…Electron
é¦–å…ˆï¼Œå½“ç„¶éœ€è¦å®‰è£… `Electron` äº†ï¼Œè¿›å…¥ `cmd`ï¼š

```
npm install -g electron
```

å¦‚æœæ— æ³•å®‰è£…å°è¯•ä¸º `npm` è®¾ç½®ä»£ç†ã€‚

æˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯å…¨å±€å®‰è£… `Electron`ï¼ŒåŸå› æ˜¯å› ä¸º `Electron` åŒ…æ¯”è¾ƒå¤§ï¼Œè€Œä¸”è¿è¡Œ `Electron` è¿™ä¸€æ“ä½œæ˜¯å¯å¤ç”¨çš„ï¼Œæ‰€ä»¥æˆ‘è®¤ä¸ºå…¨å±€å®‰è£… `Electron` æ›´åŠ åˆé€‚ï¼Œè¿™é‡Œåªéœ€è¦å®‰è£…ä¸€æ¬¡ `Electron`ï¼Œåœ¨å“ªé‡Œéƒ½èƒ½ä½¿ç”¨ã€‚

### åˆ›å»ºReacté¡¹ç›®
æ¥ä¸‹æ¥ç”¨äºæˆ‘ä»¬éœ€è¦ä½¿ç”¨ `React`ï¼Œæ‰€ä»¥ä¸€ä¸ªåœ¨é¡¹ç›®ä¸­å¯ç”¨ `React` æ”¯æŒä¹Ÿæ˜¯å¿…ä¸å¯å°‘çš„ï¼Œåˆ›å»ºä¸€ä¸ªçœŸæ­£å¯ç”¨çš„ `React` é¡¹ç›®ç¯å¢ƒè¿˜æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œè¿™é‡Œæ¨èç›´æ¥ä½¿ç”¨ `Facebook` å®˜æ–¹çš„ `create-react-app` å·¥å…·ï¼Œä½¿ç”¨å®ƒå¯ä»¥ç›´æ¥åˆ›å»ºä¸€ä¸ª `React` é¡¹ç›®ã€‚

ä½¿ç”¨ `npm` å…¨å±€å®‰è£…å®ƒï¼š

```
npm install -g create-react-app
```

å®‰è£…å®Œ `create-react-app` ä¹‹åï¼Œæˆ‘å»ºè®®ä½¿ç”¨ `WebStorm` æ¥åˆ›å»ºé¡¹ç›®ï¼Œå› ä¸º `WebStorm` æ˜¯ç°åœ¨æœ€å¥½çš„ `JavaScript` `IDE`ï¼Œå½“ç„¶å¦‚æœä½ ä¸€å®šè¦ä½¿ç”¨å‘½ä»¤è¡Œæ¥åˆ›å»ºæˆ‘ä¹Ÿæ²¡æ„è§ï¼Œåªæ˜¯ `WebStorm` å¯ä»¥æ–¹ä¾¿ä½ ä¹‹åçš„å¼€å‘ã€‚

ä½ å®‰è£… `create-react-app` æˆåŠŸä¹‹åï¼Œå°±èƒ½ç›´æ¥åœ¨ `WebStorm` ä¸­ä½¿ç”¨é›†æˆåˆ›å»ºé¡¹ç›®çš„æ–¹æ³•åˆ›å»ºä¸€ä¸ª `React` é¡¹ç›®ï¼Œåˆ›å»ºé¡¹ç›®çš„æ—¶å€™é€‰æ‹©åˆ° `React App` ä¸€æ ï¼Œ`WebStorm` ä¼šè‡ªåŠ¨è¯†åˆ«åˆ° `create-react-app` ä»¥ä¾›ä½ åˆ›å»ºé¡¹ç›®ï¼š

![WebStormåˆ›å»ºé¡¹ç›®](../img/6.png)

ç¬¬ä¸€æ æ˜¯ä½ é¡¹ç›®çš„ä½ç½®ï¼Œè‡ªå·±é€‰ä¸€ä¸ªå¹¶ä¸”å–å¥½é¡¹ç›®åå³å¯ï¼Œç¬¬ä¸‰æ å¦‚æœæŠ¥çº¢è‰²é”™è¯¯åˆ™è¯´æ˜ä½ çš„ `create-react-app` å·¥å…·æ²¡èƒ½è¢«è¯†åˆ«æˆ–è€…æ²¡èƒ½è¢«å®‰è£…ï¼Œè¯·è‡ªè¡Œæ£€æŸ¥ã€‚

ç¡®è®¤æ— è¯¯ä¹‹ååˆ›å»ºé¡¹ç›®å³å¯ï¼Œåˆ›å»ºé¡¹ç›®ä¹‹åå°†ä¼šè‡ªåŠ¨æ‰§è¡ŒæŒ‡ä»¤å®Œæˆä¹‹åçš„äº‹æƒ…ã€‚

ç­‰ä¸‹é¢çš„æ“ä½œå…¨éƒ¨å®Œæˆä¹‹åï¼Œä½ å¯ä»¥çœ‹åˆ°é¡¹ç›®ç›®å½•åƒè¿™æ ·ï¼š

![é¡¹ç›®ç»“æ„](../img/7.png)

è¿™æ—¶å€™æ¨èå†å®‰è£…ä¸€ä¸ªé¢å¤–çš„åŒ…ç®¡ç†å·¥å…· `yarn`ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ä¸ç”¨ä½¿ç”¨è‡ªå·±çš„ `cmd` æˆ–è€…ç»ˆç«¯äº†ï¼Œè€Œå¯ä»¥ç›´æ¥ä½¿ç”¨ `WebStorm` è‡ªå¸¦çš„é›†æˆç»ˆç«¯ï¼Œè¿™ä¸ªç»ˆç«¯è·ŸåŸç”Ÿç»ˆç«¯( `cmd` )ä¸€æ ·ï¼Œä½†æ˜¯ä¼šè‡ªåŠ¨è¿›å…¥é¡¹ç›®ç›®å½•ä¸‹ã€‚çœ‹ä¸Šæ–¹çš„èœå•ï¼š`View` -> `Tool Windows` -> `Terminal` å³å¯è°ƒå‡ºï¼Œåœ¨é›†æˆç»ˆç«¯ä¸­è¾“å…¥ï¼š

```
npm install -g yarn
```

å®‰è£… `yarn`ï¼Œä»¥åæˆ‘ä»¬å°†ä½¿ç”¨ `yarn` æ¥è¿›è¡ŒåŒ…ç®¡ç†è€Œä¸æ˜¯ `npm`ï¼Œå› ä¸º `yarn` æœ‰ç€æ›´å¤šä¼˜ç‚¹ã€‚

è¿™æ—¶å€™ä½ å¯ä»¥ä½¿ç”¨ï¼š

```
yarn start
```

æ‰“å¼€è°ƒè¯•æœåŠ¡å™¨ï¼Œåœ¨å¼¹å‡ºçš„ç½‘é¡µä¸­ä½ å¯ä»¥ç›´æ¥çœ‹åˆ° `React` çš„æ¬¢è¿é¡µé¢ï¼Œè¿™äº›å°±æ˜¯ `public` å’Œ `src` ç›®å½•ä¸‹çš„æ–‡ä»¶æ‰€åšçš„åŠªåŠ›ã€‚

ä½†æ˜¯æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦æŠŠä»–ä»¬å…¨éƒ¨åˆ é™¤ï¼Œå› ä¸ºæˆ‘ä»¬è‡ªå·±çš„é¡µé¢æ ¹æœ¬ä¸éœ€è¦å®ƒã€‚æ³¨æ„æ˜¯åˆ é™¤ `public`ã€`src` æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œè€Œä¸æ˜¯åˆ é™¤è¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼

### å¼•å…¥Ant-Design
å½“åˆ é™¤å®Œæˆä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼•å…¥ `Ant-Design` äº†ï¼Œåœ¨é›†æˆç»ˆç«¯ä¸­è¾“å…¥ï¼š

```
yarn add antd
```

è¿™æ ·ä¸€æ¥æˆ‘ä»¬å°±åœ¨é¡¹ç›®ä¸­å¼•å…¥äº† `Ant-Design`ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜ä¸èƒ½ç›´æ¥ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬è¿˜éœ€è¦åšä¸€äº›å¤„ç†ã€‚

å®‰è£… `react-app-rewired`ï¼Œè¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰é…ç½® `react` é¡¹ç›®çš„å·¥å…·ï¼š

```
yarn add react-app-rewired --dev
```

ä¿®æ”¹æ ¹ç›®å½•ä¸‹çš„ `package.json`ï¼š

```
# /package.json

"scripts": {
-    "start": "react-scripts start",
-    "build": "react-scripts build",
-    "test": "react-scripts test --env=jsdom",
+    "start": "react-app-rewired start",
+    "build": "react-app-rewired build",
+    "test": "react-app-rewired test --env=jsdom",
  }
```

è¿™æ ·åšçš„ç›®çš„æ˜¯è®© `start`ã€`build`ã€`test`ä¸‰ä¸ªå‘½ä»¤ä½¿ç”¨æˆ‘ä»¬è‡ªå®šä¹‰çš„ `React` é…ç½®è€Œä¸æ˜¯ä½¿ç”¨é»˜è®¤çš„ã€‚

ç„¶ååœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª `config-overrides.js`ï¼Œç”¨äºä¹¦å†™è‡ªå®šä¹‰é…ç½®ï¼š

```
# /config-overrides.js

module.exports = function override(config, env) {
  return config;
};
```

æ¥ä¸‹æ¥éœ€è¦å®‰è£… `babel-plugin-import`ï¼Œè¿™æ˜¯ä¸€ä¸ªæŒ‰éœ€åŠ è½½ä»£ç ã€æ ·å¼çš„ `babel` æ’ä»¶ï¼š

```
yarn add babel-plugin-import --dev
```

ä¿®æ”¹ `config-overrides.js`ï¼š

```
# /config-overrides.js

+ const { injectBabelPlugin } = require('react-app-rewired');

  module.exports = function override(config, env) {
+   config = injectBabelPlugin(['import', { libraryName: 'antd', libraryDirectory: 'es', style: 'css' }], config);
    return config;
  };
```

è¿™æ ·ä¸€æ¥ï¼Œ`Ant-Design` å°±é…ç½®å®Œäº†

### æ·»åŠ è·¯ç”±
è¿™æ—¶å€™åœ¨ `public` ä¸‹æ–°å»ºä¸€ä¸ª `html` æ–‡ä»¶ï¼Œåƒè¿™æ ·ï¼š

```
# /public/index.html

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Electron Test</title>
</head>
<body>
    <div id="root"></div>
</body>
</html>
```

è¿™ä¸ªæ–‡ä»¶å°†æ¥å°†ä¼šä½œä¸º `Electron` çš„å…¥å£ç½‘é¡µæ–‡ä»¶ã€‚

å®‰è£…å‰ç«¯è·¯ç”± `react-router-dom`ï¼š

```
yarn install react-router-dom
```

å®‰è£…å®Œæˆä¹‹åï¼Œåœ¨ `src` ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªå…¥å£ `js` æ–‡ä»¶ `index.js`ã€ä¸€ä¸ªè·¯ç”±ç»„ä»¶æ–‡ä»¶ `router.js`ï¼Œå†åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹å« `page` ç”¨äºå­˜å‚¨é¡µé¢ç»„ä»¶æ–‡ä»¶ï¼Œé‡Œé¢å†å»ºç«‹ä¸€ä¸ªæ–‡ä»¶å«åš `index.js`ï¼Œç”¨äºå­˜å‚¨é¦–é¡µç»„ä»¶ï¼Œè¿™æ—¶é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š

![é¡¹ç›®ç»“æ„](../img/8.png)

è¿™æ—¶å€™æˆ‘ä»¬å…ˆä¿®æ”¹ `/src/page/index.js` æ–‡ä»¶ï¼Œåœ¨é‡Œé¢å†™ä¸€ä¸ªé¦–é¡µçš„ç»„ä»¶ï¼š

```
# /src/page/index.js

import React from 'react';
import { Button } from 'antd';

export class IndexPage extends React.Component {
    render() {
        return (
            <div>
                <Button>Click Me!</Button>
            </div>
        );
    }
}
```

ç„¶åæ‰“å¼€è·¯ç”±æ–‡ä»¶ `/src/router.js`ï¼Œå†™è·¯ç”±ç»„ä»¶ï¼š

```
# /src/router.js

import React from 'react';
import { HashRouter, Route, Switch } from 'react-router-dom';
import { IndexPage } from "./page";

export class MainRouter extends React.Component {
    render() {
        return (
            <HashRouter>
                <Switch>
                    <Route exact path={'/'} component={IndexPage}/>
                </Switch>
            </HashRouter>
        );
    }
}
```

ä»¥åæ·»åŠ æ–°é¡µé¢åªéœ€è¦åœ¨ `page` ä¸­å†™ä¸€ä¸ªæ–°çš„é¡µé¢ç»„ä»¶æ–‡ä»¶ï¼Œç„¶åä¿®æ”¹è·¯ç”±æ–‡ä»¶ï¼Œåœ¨ `Switch` ä¸­æ·»åŠ  `path` ä¸ç»„ä»¶çš„å¯¹åº”å…³ç³»å³å¯ã€‚

æ¥ä¸‹æ¥å†åœ¨ `/src/index.js` è¿™ä¸€å…¥å£æ–‡ä»¶ä¸­æ¸²æŸ“è·¯ç”±ç»„ä»¶ï¼š

```
# /src/index.js

import React from 'react';
import ReactDom from 'react-dom';
import { MainRouter } from "./router";

ReactDom.render(
    <MainRouter/>,
    document.getElementById('root')
);
```

è¿™æ ·ä¸€æ¥ï¼Œå°±ç®—æˆåŠŸåœ°å†™äº†ä¸€ä¸ªæ¡†æ¶äº†ï¼Œä»¥åæ·»åŠ æ–°é¡µé¢åªéœ€è¦æŒ‰ç…§è§„åˆ™æ·»åŠ å³å¯ã€‚

å¯ä»¥å°è¯•ä½¿ç”¨ï¼š

```
yarn start
```

æ¥è¿è¡Œè°ƒè¯•æœåŠ¡å™¨æŸ¥çœ‹é¡µé¢æ˜¯å¦æ˜¾ç¤ºæ­£å¸¸ã€‚å¦‚æœçœ‹åˆ°è¿™æ ·çš„é¡µé¢ï¼Œä¸Šé¢æœ‰ä¸€ä¸ª `Antd` æ ·å¼çš„æŒ‰é’®ï¼š

![é¡µé¢](../img/9.png)

é‚£ä¹ˆæ­å–œä½ ï¼Œè‡³å°‘ä½ åˆ°è¿™ä¸€æ­¥ä¹‹å‰çš„éƒ½æˆåŠŸäº†ï¼Œå¦‚æœæ²¡æœ‰æˆåŠŸï¼Œä»”ç»†å›çœ‹æ­¥éª¤ï¼Œçœ‹æ˜¯å¦æœ‰åšé”™çš„åœ°æ–¹ã€‚

### ä½¿ç”¨Electronè¿è¡Œé¡µé¢
æ—¢ç„¶é¡µé¢åœ¨ä¸ä½¿ç”¨çš„ `Electron` çš„æ—¶å€™èƒ½å¤Ÿæ­£å¸¸è¿è¡Œï¼Œé‚£ä¹ˆåº”è¯¥åœ¨ `Electron` ä¸Šé¢è·‘ä¸€è·‘çœ‹ä¸€ä¸‹æ•ˆæœäº†ã€‚

åœ¨ `/package.jso` nä¸­æ·»åŠ ä¸€æ¡è„šæœ¬ï¼Œå¹¶ä¸”ä¿®æ”¹å°‘é‡é…ç½®,ç”¨äºæ‰§è¡Œ `Electron` åº”ç”¨ï¼š

```
# /package.json

  "scripts": {
    "start": "react-app-rewired start",
    "build": "react-app-rewired build",
    "test": "react-app-rewired test --env=jsdom",
    "eject": "react-scripts eject",
+  "estart": "electron ."
  }

  ...

+  "main": "main.js",
+  "homepage": ".",
+  "DEV": true
```

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª `main.js`ï¼Œç”¨äºä½œä¸º `Electron` åº”ç”¨çš„å…¥å£ï¼š

```
# /main.js

const { app, BrowserWindow } = require('electron');

// æµè§ˆå™¨å¼•ç”¨
let window;

// åˆ›å»ºæµè§ˆå™¨çª—å£å‡½æ•°
let createWindow = () => {
    // åˆ›å»ºæµè§ˆå™¨çª—å£
    window = new BrowserWindow({
        width: 800,
        height: 600
    });

    // åŠ è½½åº”ç”¨ä¸­çš„index.htmlæ–‡ä»¶
    window.loadFile('./build/index.html/');

    // å½“windowè¢«å…³é—­æ—¶ï¼Œé™¤æ‰windowçš„å¼•ç”¨
    window.on('closed', () => {
        window = null;
    });
};

// å½“appå‡†å¤‡å°±ç»ªæ—¶å€™å¼€å¯çª—å£
app.on('ready', createWindow);

// å½“å…¨éƒ¨çª—å£éƒ½è¢«å…³é—­ä¹‹åæ¨å‡º
app.on('window-all-closed', () => {
    if (process.platform !== 'darwin') {
        app.quit();
    }
});

// åœ¨macosä¸Šï¼Œå•å‡»dockå›¾æ ‡å¹¶ä¸”æ²¡æœ‰å…¶ä»–çª—å£æ‰“å¼€çš„æ—¶å€™ï¼Œé‡æ–°åˆ›å»ºä¸€ä¸ªçª—å£
app.on('activate', () => {
    if (window == null) {
        createWindow();
    }
});
```

ä»æ­¤ï¼Œæ¯æ¬¡è¿è¡Œ `Electron`ï¼Œåªéœ€è¦è¾“å…¥

```
# è¿è¡Œæ„å»ºæŒ‡ä»¤
yarn build
# ä½¿ç”¨electronè¿è¡Œæ„å»ºå‡ºæ¥çš„Webé¡¹ç›®
yarn estart
```

å³å¯çœ‹è§æ•ˆæœï¼Œåƒè¿™æ ·ï¼š

![Electron åº”ç”¨è¿è¡Œæ•ˆæœ](../img/10.png)

åƒå¹³æ—¶å†™ `Web` é¡¹ç›®ä¸€æ ·å†™åŸç”Ÿ `UI` å§ï¼ŒEnjoy!
