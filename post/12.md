<!--
@key 12
@title JavaScript ä¸­çš„æ¨¡æ¿å­—ç¬¦ä¸²
@date 2018-6-9
@labels JavaScript è¯­æ³•
-->

æ¨¡æ¿å­—ç¬¦ä¸²æ˜¯å¯ä»¥ä½¿ç”¨å†…åµŒè¡¨è¾¾å¼çš„å­—ç¬¦ä¸²ï¼Œä¸å°‘é«˜çº§è¯­è¨€ä¸­éƒ½æœ‰è¿™ä¸€ç‰¹æ€§ï¼Œå¦‚ `Python`ã€`Kotlin`ï¼Œ`JavaScript` ä¹Ÿåœ¨ `ES5` è§„èŒƒä¸­åŠ å…¥äº†è¿™ä¸€ç‰¹æ€§ã€‚

# â˜• è¯­æ³•

```javascript
`text`

`lin1
lin2`

`text ${expr}`

tag `text ${expr}`
```

# ğŸ§€ è¯¦è§£
`JavaScript` ä¸­çš„æ¨¡æ¿å­—ç¬¦ä¸²ä½¿ç”¨åå¼•å·æ¥åŒ…è£¹å­—ç¬¦ä¸²å†…å®¹è€Œä¸æ˜¯å•å¼•å·æˆ–åŒå¼•å·ã€‚

### è½¬ä¹‰
å› ä¸ºæ¨¡æ¿å­—ç¬¦ä¸²ä½¿ç”¨åå¼•å·æ¥åŒ…è£¹å­—ç¬¦ä¸²å†…å®¹ï¼Œæ‰€ä»¥åœ¨æ¨¡æ¿å­—ç¬¦ä¸²å†…éƒ¨ä½¿ç”¨åå¼•å·æ—¶éœ€è¦è½¬ä¹‰ï¼Œå¦‚ä¸‹ï¼š

```javascript
`\`` === '`' // true
```

### å¤šè¡Œå­—ç¬¦ä¸²
å¦‚æœä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œä»»ä½•è¢«åŒ…è£¹åœ¨ä¸¤ä¸ªåå¼•å·ä¹‹é—´çš„å­—ç¬¦éƒ½ä¼šè¢«è®¤ä¸ºæ˜¯æœ‰æ•ˆçš„å­—ç¬¦ä¸²å†…å®¹ï¼ŒåŒ…æ‹¬æ¢è¡Œå­—ç¬¦ã€‚æ‰€ä»¥ã€‚

```javascript
`line1
line2`

//ç­‰ä»·äº

'line1\n' + 'line2'
```

### å†…åµŒè¡¨è¾¾å¼
ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²çš„æœ€å¤§ä¼˜åŠ¿åœ¨äºä¸å¿…å†ä½¿ç”¨ç¹ççš„å­—ç¬¦ä¸²è¿æ¥æ“ä½œæ¥è¿æ¥æ™®é€šå­—ç¬¦ä¸²ä¸è¡¨è¾¾å¼ï¼Œè€Œæ˜¯å¯ä»¥ç›´æ¥åœ¨å­—ç¬¦ä¸²å†…éƒ¨å†™è¡¨è¾¾å¼ã€‚

```javascript
let a = 10;
let b = 20;

// '10 + 20 = 30'
console.log(`${a} + ${b} = ${a + b}`);
```

### å¸¦æ ‡ç­¾çš„æ¨¡æ¿å­—ç¬¦ä¸²
æ›´é«˜çº§çš„å½¢å¼çš„æ¨¡æ¿å­—ç¬¦ä¸²æ˜¯å¸¦æ ‡ç­¾çš„æ¨¡æ¿å­—ç¬¦ä¸²ã€‚æ ‡ç­¾ä½¿æ‚¨å¯ä»¥ç”¨å‡½æ•°è§£ææ¨¡æ¿å­—ç¬¦ä¸²ã€‚æ ‡ç­¾å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°åŒ…å«ä¸€ä¸ªå­—ç¬¦ä¸²å€¼çš„æ•°ç»„ã€‚å…¶ä½™çš„å‚æ•°ä¸è¡¨è¾¾å¼ç›¸å…³ã€‚æœ€åï¼Œä½ çš„å‡½æ•°å¯ä»¥è¿”å›å¤„ç†å¥½çš„çš„å­—ç¬¦ä¸²ï¼ˆæˆ–è€…å®ƒå¯ä»¥è¿”å›å®Œå…¨ä¸åŒçš„ä¸œè¥¿ , å¦‚ä¸‹ä¸ªä¾‹å­æ‰€è¿°ï¼‰ã€‚ç”¨äºè¯¥æ ‡ç­¾çš„å‡½æ•°çš„åç§°å¯ä»¥è¢«å‘½åä¸ºä»»ä½•åå­—ã€‚

```javascript
var person = 'Mike';
var age = 28;

function myTag(strings, personExp, ageExp) {

  var str0 = strings[0]; // "that "
  var str1 = strings[1]; // " is a "

  // There is technically a string after
  // the final expression (in our example),
  // but it is empty (""), so disregard.
  // var str2 = strings[2];

  var ageStr;
  if (ageExp > 99){
    ageStr = 'centenarian';
  } else {
    ageStr = 'youngster';
  }

  return str0 + personExp + str1 + ageStr;

}

var output = myTag`that ${ person } is a ${ age }`;

console.log(output);
// that Mike is a youngster
```

æ­£å¦‚ä¸‹é¢ä¾‹å­æ‰€å±•ç¤ºçš„ï¼Œæ ‡ç­¾å‡½æ•°å¹¶ä¸ä¸€å®šéœ€è¦è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚

```javascript
function template(strings, ...keys) {
  return (function(...values) {
    var dict = values[values.length - 1] || {};
    var result = [strings[0]];
    keys.forEach(function(key, i) {
      var value = Number.isInteger(key) ? values[key] : dict[key];
      result.push(value, strings[i + 1]);
    });
    return result.join('');
  });
}

var t1Closure = template`${0}${1}${0}!`;
t1Closure('Y', 'A');  // "YAY!"
var t2Closure = template`${0} ${'foo'}!`;
t2Closure('Hello', {foo: 'World'});  // "Hello World!"
```

### åŸå§‹å­—ç¬¦ä¸²
åœ¨æ ‡ç­¾å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸­ï¼Œå­˜åœ¨ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§ `raw` ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®ƒæ¥è®¿é—®æ¨¡æ¿å­—ç¬¦ä¸²çš„åŸå§‹å­—ç¬¦ä¸²ï¼Œè€Œä¸ç»è¿‡ç‰¹æ®Šå­—ç¬¦çš„æ›¿æ¢ã€‚

```javascript
function tag(strings) {
  console.log(strings.raw[0]);
}

tag`string text line 1 \n string text line 2`;
// logs "string text line 1 \n string text line 2" ,
// including the two characters '\' and 'n'
```

å¦å¤–ï¼Œä½¿ç”¨ `String.raw()` æ–¹æ³•åˆ›å»ºåŸå§‹å­—ç¬¦ä¸²å’Œä½¿ç”¨é»˜è®¤æ¨¡æ¿å‡½æ•°å’Œå­—ç¬¦ä¸²è¿æ¥åˆ›å»ºæ˜¯ä¸€æ ·çš„ã€‚

```javascript
var str = String.raw`Hi\n${2+3}!`;
// "Hi\n5!"

str.length;
// 6

str.split('').join(',');
// "H,i,\,n,5,!"
```
