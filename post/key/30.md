<!--
@key 30
@title ä½¿ç”¨ Emailjs å‘é€é‚®ä»¶
@date 2021-1-14
@labels Node.js JavaScript
@description Emailjs æ˜¯ä¸€ä¸ªä¸é”™çš„ Node.js SMTP å®¢æˆ·ç«¯ï¼Œå¯ä»¥ä½¿ç”¨å®ƒæ¥å®Œæˆé‚®ä»¶çš„è‡ªåŠ¨å‘é€ï¼Œæœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ Emailjsã€‚
-->

# ğŸ’¡ èƒŒæ™¯

çªç„¶éœ€è¦ä¸€ä¸ªåç«¯å‘é€é‚®ç®±éªŒè¯ç çš„åŠŸèƒ½ï¼Œæˆ‘ä½¿ç”¨çš„åç«¯æ¡†æ¶æ˜¯åŸºäº `Node.js` æ­å»ºçš„ï¼Œæ‰€ä»¥å‡†å¤‡æ‰¾ä¸€ä¸ªåˆé€‚çš„èƒ½å¤Ÿè°ƒç”¨ `SMTP` æœåŠ¡å‘é€é‚®ä»¶çš„è½®å­ã€‚

ä¸€ç•ªå¯»æ‰¾ä¹‹åï¼Œæˆ‘æ‰¾åˆ°äº† [emailjs](https://github.com/eleith/emailjs)ï¼Œä¸‹é¢ç®€å•ä»‹ç»ä¸€ä¸‹ç”¨æ³•ã€‚

# ğŸ“¦ å®‰è£…

æœ€ç»å…¸çš„ `npm/yarn` å®‰è£…ï¼š

```shell
# Yarn
yarn add emailjs

# Npm
npm install emailjs
```

# ğŸ“® é…ç½®é‚®ç®±

æ¥ä¸‹æ¥éœ€è¦ä¸€ä¸ªå¯ä»¥ä½¿ç”¨çš„é‚®ç®±è´¦æˆ·ï¼Œå› ä¸ºæˆ‘ä¸å‡†å¤‡ä»¥ä¸ªäººé‚®ç®±å‘é€éªŒè¯ç ï¼Œæˆ‘ä½¿ç”¨äº†å…è´¹çš„ [è…¾è®¯ä¼ä¸šé‚®ç®±](https://exmail.qq.com/login)ï¼Œæ³¨å†Œäº†ä¸€ä¸ªä¼ä¸šè´¦æˆ·ï¼Œå½“ç„¶ä½ å¯ä»¥ä½¿ç”¨ä»»æ„æ”¯æŒ `SMTP` æœåŠ¡çš„é‚®ç®±ã€‚

æ¥ä¸‹æ¥éœ€è¦åœ¨é‚®ç®±åå°é…ç½®å¼€å¯ `SMTP` æœåŠ¡ï¼š

![Email Config](../../img/41.png)

æœ‰ä¸€äº›é‚®ç®±å¯¹äºä¸‰æ–¹å®¢æˆ·ç«¯é‡‡å–äº†é«˜çº§çš„å®‰å…¨ç™»å½•ç­–ç•¥ï¼Œä¸å…è®¸ç›´æ¥ä½¿ç”¨å¯†ç ç™»å½•ï¼Œè€Œæ˜¯ä½¿ç”¨ `token`ï¼Œè…¾è®¯ä¼ä¸šé‚®ç®±å°±é‡‡å–äº†è¿™æ ·çš„æ–¹æ¡ˆï¼š

![Login Config](../../img/42.png)

è¿™æ—¶å€™æˆ‘ä»¬éœ€è¦ç”Ÿæˆä¸€ä¸ªæ–°çš„ `token` ç”¨äº `emailjs` ä½¿ç”¨ `SMTP` æœåŠ¡ï¼š

![Token Generate](../../img/43.png)

å¤åˆ¶å®¢æˆ·ç«¯å¯†ç ï¼Œå‡†å¤‡ä½¿ç”¨ `emailjs` å‘é€é‚®ä»¶ã€‚

# ğŸ¯ Emailjs ä½¿ç”¨

`emailjs` æ˜¯åŸºäº `SMTP` æœåŠ¡å‘é€é‚®ä»¶çš„ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæŸ¥è¯¢å¯¹åº”é‚®ç®±æœåŠ¡å™¨çš„ `SMTP` æœåŠ¡ç«¯å£ä¸åœ°å€ï¼Œè…¾è®¯ä¼ä¸šé‚®ç®±æœ‰ä¸€ä¸ª [é…ç½®æŒ‡å—](https://work.weixin.qq.com/help?person_id=0&doc_id=423&helpType=exmail)ï¼Œé€šè¿‡é…ç½®æŒ‡å—æˆ‘ä»¬å¯ä»¥å¾—åˆ°ä»¥ä¸‹ä¿¡æ¯ï¼š

* `SMTP` å‘é€æœåŠ¡å™¨åœ°å€ï¼š`smtp.exmail.qq.com`
* ç«¯å£å·ï¼š`465`
* `SSL`ï¼šå¼€å¯

æ¥ä¸‹æ¥ç¼–å†™ `Node.js` ä»£ç ï¼š

```js
const { SMTPClient } = require('emailjs');

const client = new SMTPClient({
    user: `${senderEmail}`,
    password: `${password}`,
    host: 'smtp.exmail.qq.com',
    port: 465,
    ssl: true
});

(async function () {
    try {
        await client.sendAsync({
            text: 'Hello World!',
            from: `${senderName} <${senderEmail}>`,
            to: `${receiverEmail}`,
            subject: 'Test Email'
        });
    } catch (e) {
        console.log(e);
    }
})();
```

å…¶ä¸­ä½ éœ€è¦æ›¿æ¢è¿™äº›å˜é‡ï¼š

* `${senderName}`ï¼šä½ æƒ³å±•ç¤ºçš„ç¬”å
* `${senderEmail}`ï¼šä½ çš„å‘é€é‚®ç®±
* `${password}`ï¼šä¸Šä¸€èŠ‚ç”³è¯·çš„ç™»å½• `token` æˆ–é‚®ç®±å¯†ç 
* `${receiverEmail}`ï¼šæ¥æ”¶è€…é‚®ç®±

æ¥ä¸‹æ¥ç™»å½•æ¥æ”¶è€…é‚®ç®±ï¼Œå³å¯çœ‹åˆ°é‚®ä»¶å‘é€æˆåŠŸï¼š

![Email Detail](../../img/44.png)

å¦‚æœæƒ³äº†è§£æ›´è¯¦ç»†çš„ç”¨æ³•ï¼Œå¯ä»¥åœ¨ `github` ä¸ŠæŸ¥çœ‹ [emailjs](https://github.com/eleith/emailjs) æ›´è¯¦ç»†çš„æ–‡æ¡£ã€‚
